{"remainingRequest":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/antz/vscode/Web/onefocus/vue-focus/src/views/LogIn.vue?vue&type=style&index=0&id=933e7582&scoped=true&lang=css","dependencies":[{"path":"/home/antz/vscode/Web/onefocus/vue-focus/src/views/LogIn.vue","mtime":1621439702714},{"path":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/antz/vscode/Web/onefocus/vue-focus/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgojbG9naW4gewogIGhlaWdodDogMTAwdmg7Cn0KCg=="},{"version":3,"sources":["/home/antz/vscode/Web/onefocus/vue-focus/src/views/LogIn.vue"],"names":[],"mappings":";;AA+FA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf","file":"/home/antz/vscode/Web/onefocus/vue-focus/src/views/LogIn.vue","sourceRoot":"","sourcesContent":["<template>\n  <div id=\"login\">\n    <form @submit.prevent=\"submitForm\" class=\"user-form\">\n      <div>\n        <label>Username</label>\n        <br>\n        <input type=\"text\" v-model=\"username\">\n      </div>\n      <div>\n        <label>Password</label>\n        <br>\n        <input type=\"password\" v-model=\"password\">\n      </div>\n      <div v-if=\"errors.length\">\n        <div class=\"form-text\">\n          <p v-for=\"error in errors\" :key=\"error\">{{ error }}</p>\n        </div>\n      </div>\n      <div>\n        <button>Log In</button>\n      </div>\n    </form>\n    <div class=\"form-text\">\n      <br>\n      <p>Don't have an account yet? <router-link to=\"/sign-up\">Sign up here!</router-link></p>\n      <!-- <p>It's easy, get started today :)</p> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\n\nexport default {\n  name: 'LogIn',\n  data() {\n    return {\n      username: '',\n      password: '',\n      errors: []\n    }\n  },\n  mounted() {\n    document.title = 'Log In | OneFocus'\n  },\n  methods: {\n    async submitForm() {\n      this.errors = []\n\n      axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n      localStorage.removeItem(\"token\")\n\n      const formData = {\n        username: this.username,\n        password: this.password\n      }\n\n      await axios\n        .post(\"/api/v1/token/login/\", formData) \n        .then(response => {\n          const token = response.data.auth_token\n\n          this.$store.commit('setToken', token)\n\n          axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n\n          localStorage.setItem(\"token\", token)\n\n          const toPath = this.$route.query.to || '/'\n\n          this.$router.push(toPath)\n        })\n        .catch(error => {\n          if (error.response) {\n            for (const property in error.response.data) {\n              this.errors.push(`${property}: ${error.response.data[property]}`)\n            }\n          } else {\n            this.errors.push('Something went wrong. Please try again')\n\n            console.log(JSON.stringify(error))\n          }\n        })\n    }\n\n  }\n}\n\n\n</script>\n\n<style scoped>\n\n#login {\n  height: 100vh;\n}\n\n</style>"]}]}